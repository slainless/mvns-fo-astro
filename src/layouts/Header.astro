---
import Navigation from './Header/Navigation.tsx'
import Search from './Header/Search.tsx'
import cntl from 'cntl'
---

<header
  class={cntl`
    px-5 lg:px-16 
    py-3 lg:py-5
    grid 
    grid-cols-2 lg:grid-cols-3 
    fixed top-0 bg-black z-30 w-full 
    items-center transition-all shadow-md
  `}
  id="header"
>
  <style>
    [data-compact] {
      @apply py-2 lg:py-3;
    }

    [data-compact] img {
      @apply h-7 lg:h-10;
    }
  </style>
  <img
    id="logo"
    src="/media/logo-trimmed.png"
    alt="logo"
    class="h-7 lg:h-11 transition-all"
  />
  <Search />
  <Navigation client:load />
  <script hoist type="module">
    import { throttle } from 'lodash-es'
    function compactHeader() {
      if (window.scrollY >= 100 && header.dataset.compact == null) {
        header.dataset.compact = ''
      } else if (window.scrollY < 100 && header.dataset.compact === '') {
        delete header.dataset.compact
      }
    }
    compactHeader()

    const throttled = throttle(compactHeader, 500)
    document.addEventListener('scroll', throttled)
  </script>
</header>
