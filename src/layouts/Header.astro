---
import Navigation from './Header/Navigation.tsx'
import Search from './Header/Search.tsx'
---

<header
  class="px-16 grid grid-cols-3 fixed top-0 bg-black z-50 w-full py-5 items-center transition-all shadow-md"
  id="header"
>
  <img
    id="logo"
    src="/image/logo-trimmed.png"
    alt="logo"
    class="h-11 transition-all"
  />
  <Search />
  <Navigation />
  <script type="module" client:load>
    import { throttle } from 'lodash-es'
    function compactHeader() {
      if (window.scrollY >= 100 && header.dataset.compact == null) {
        header.dataset.compact = ''
      } else if (window.scrollY < 100 && header.dataset.compact === '') {
        delete header.dataset.compact
      }
    }
    compactHeader()

    const throttled = throttle(compactHeader, 500)
    document.addEventListener('scroll', throttled)
  </script>
  <style lang="styl">
    [data-compact] {
      @apply py-3

      img {
        @apply h-10;
      }
    }
  </style>
</header>
